# 大语言模型长论文撰写

> 简体中文 | [English](README.EN.md)

本教程描述了如何使用 [Visual Studio Code](https://code.visualstudio.com/Download) 的 [Roo Code 智能体](https://roocode.com)扩展撰写长论文。

## 教程

### 安装依赖

1. 安装 [Visual Studio Code](https://code.visualstudio.com/Download)；
2. 安装 [Git](https://git-scm.com/downloads)。

### 智能体配置

1. 启动 [Visual Studio Code](https://code.visualstudio.com/Download)；
2. 安装项目环境相关扩展（可选。如果您有已完成的项目供参考则推荐完成这一步）；
3. VS Code 内安装 [Roo Code](https://roocode.com) 扩展；
4. 点击左侧袋鼠（Roo Code）图标配置大预言模型提供商 API 和模型（模型的选用标准应以上下文长度更长优先；~~目前~~`截止 2025 年 6 月 22 日`推荐使用 DeepSeek-V3-0324，因为许多平台提供免费 API 调用）；
5. 在 Roo Code 的`上下文`设置中适量提高`并发文件读取限制`，并将`文件读取自动截断阈值`设置为`始终读取整个文件`。

### 项目配置

1. 在您通常存放项目文件夹的文件夹（既项目文件夹的父文件夹）中启动终端；或使用 `cd` 命令进入该文件夹；
2. 执行命令 `git clone https://github.com/PJ-568/long-paper-ai-agent-tutorial.git --depth=1`，如果您遇到网络问题，可尝试 `git clone https://github.com/PJ-568/long-paper-ai-agent-tutorial.git --depth=1`，完毕后会生成名为 `long-paper-ai-agent-tutorial` 的文件夹；
3. 执行 `cd long-paper-ai-agent-tutorial` 进入项目文件夹；
4. 执行 `code .` 以此文件夹为工作目录启动 VS Code。

> 鉴于对 `githubfast.com` 的安全性考量，请仅在非生产环境中使用此域名。

### 文件路径优化（可选）

1. 把需要智能体阅读的文件或文件夹复制或符号链接到本项目文件夹内。

> 请注意：如果您选择使用符号链接，需要在接下来的提示词里向智能体说明（“某文件或文件夹是符号链接，所以系统未向您列出……”）。

### 文档格式优化

如果您需要优化报告模板的样式和格式，请按照以下步骤操作：

1. 修改以下提示词，将 `<文件路径/文件名>` 替换为包含报告要求的文件的相对路径（可通过在 VS Code 的文件列表中右键`复制相对路径`获取）；

   如果有多个文件，请改成如`` `<文件路径1/文件名1>`、`<文件路径2/文件名2>`、`<文件路径3/文件名3>` ``的格式。

   ```markdown
   # 文档格式优化
   
   您接下来的任务是根据获取的要求优化报告模板的样式和格式。
   
   ## **要求**
   
   **请严格遵循以下要求：**
   
   - **只有当确定报告模板的样式和格式不符合获取的要求中要求的样式和格式才修改报告模板；**
   - **禁止删除、更改报告模板中的示例和注释；**
   - **只修改样式中不符合要求的部分，除非标题格式严重不符合要求。**
   
   ## 任务
   
   1. 请阅读`<文件路径/文件名>`，了解报告的要求。
   2. 如果要求内有文档格式要求，请根据要求修改`报告模板.html`以符合要求。
   
   ```

2. 在 Roo Code 新建会话，设定模式为 `Code`，粘贴上一步修改的提示词并发送；
3. 等待智能体完成任务；
4. 用浏览器打开检查`报告模板.html`，查看是否满足要求；
5. 如果不满足要求，请求智能体修改直至要求满足。

> 在智能体工作时，请留意会话任务标题下方的上下文长度进度条，请尽量在超出最大上下文长度之前完成所有任务。

### 文档撰写

1. 修改以下提示词，将 `<!-- 这是个什么项目，项目当前是什么状态，您需要阅读某代码和某文档来了解这个项目； -->` 替换为对该报告的目标对象的状态等必要信息；

   须被阅读的文件需要用相对路径（可通过在 VS Code 的文件列表中右键`复制相对路径`获取）填写，如 `<文件路径/文件名>`；

   如果有多个文件，可通过如`` `<文件路径1/文件名1>`、`<文件路径2/文件名2>`、`<文件路径3/文件名3>` ``的格式提供；

   将 `【标题编号】标题` 替换为欲编写的标题编号和标题。

   ```markdown
   # 文档撰写
   
   您接下来的任务是编写报告书的各个片段。
   
   ## **要求**
   
   **请严格遵循以下要求：**
   
   - **每个回答只写个片段的 HTML 片段：**
     - 仅 HTML，*不包含* CSS；
     - 直接写内容的 HTML，*不包含*该片段的大标题，也*不需要*用什么 `<div class="content"></div>` 之类的包装。
   - **以标题编号作为文件名：**
     - 比如加入你要编写`<h2>3 系统需求分析</h2>`和`<h3>3.1 业务流程分析</h3>`之间的内容，你就只写入该部分的 html 片段到 `.\parts\3.html`（文件名以标题号命名：`3.3.html`、`3.3.1.html`……以此类推）；
     - 报告模板内的标题编号可能和上述例子不一致，请自行处理。
   - **任何能使用 PlantUML 表示的关系、结构架构、状态、数据流、模型、流程等，用 PlantUML 在代码块中写出；**
   - **任何*不能*用 PlantUML 表示的图如展示用截图，根据报告模板示例并写上`【此处为……图】`，我会在之后手动填写；**
   - **内容要在实事求是的基础上尽可能详细充实——字数越多越好；**
   - ***不要*在文中写“引用”。**
   
   ## 任务
   
   1. <!-- 这是个什么项目，项目当前是什么状态，您需要阅读某代码和某文档来了解这个项目； -->
   2. 请阅读`报告模板.html`。
   3. **完成`【标题编号】标题`部分。**
   
   ```

2. 在 Roo Code 新建会话，设定模式为 `Code`，粘贴上一步修改的提示词并发送；
3. 等待智能体完成第一轮任务；
4. 用浏览器打开检查`报告模板.html`，查看是否满足要求；
5. 如果不满足要求，请求智能体修改直至要求满足；
6. 如果满足要求，向智能体发送第二轮任务：``很好。现在：**完成`【标题编号】标题`部分。**``（把`【标题编号】标题`替换为欲编写的标题编号和标题）；
7. 等待智能体完成第二轮任务；
8. 点击第二轮任务提示词右上角的`垃圾桶（删除）`按钮，并选择删除`此消息及所有后续消息`（此操作防止上下文溢出导致的上下文压缩）；
9. 重复步骤 6 至 8，直到完成所有任务。

> 在智能体工作时，请留意会话任务标题下方的上下文长度进度条，请尽量在超出最大上下文长度之前完成所有任务。

### 润色结果

以下步骤大多需要手动操作。至少在 Computer use 完善前难以人工智能替代。

1. 复制`报告模板.html`为`报告.html`；
2. 手动将 `parts` 文件夹下的所有文件的内容手动插入至`报告.html`中的对应位置；
3. 在 Roo Code 新建会话，设定模式为 `Ask`，要求智能体阅读`报告.html`，检查是否存在重复、冗余或不合理的地方，由用户手动修改；
4. 如果存在重复、冗余的地方，手动删改；如果存在不合理的地方，在要求智能体避开不合理问题的前提下参考[文档撰写](#文档撰写)的步骤 6 至 9，修改该不合理章节；
5. 查找`报告模板.html`内所有的 `@startuml`，依次将所有 UML 代码逐个粘贴至 [PlantUML Web Server](https://www.plantuml.com/plantuml/uml) 渲染，将渲染后的[图片转为 data url](https://www.lmstfy.icu/Bing/?q=5Zyo57q/5Zu+54mH6L2sIGRhdGEgdXJs) 格式替换掉原 UML 代码块：

   ```diff
   -   <div class="code-block">
   -     <pre>@startuml
   - Bob -> Alice : hello
   - @enduml</pre>
   +   <div class="diagram">
   +     <img src="datadata:image/png;base64,……" alt="问好流程图"></img>
   +     <p>图1. 问好流程</p>
       </div>
   ```

6. 查找`报告模板.html`内所有的 `【`，依次将所有的需手动添加的[图片或截图转为 data url](https://www.lmstfy.icu/Bing/?q=5Zyo57q/5Zu+54mH6L2sIGRhdGEgdXJs) 格式后替换掉原 diagram 类下元素：

   ```diff
       <div class="diagram">
   -     <img src="" alt="【此处为项目前端截图】"></img>
   -     <p>图X. 【此处为项目前端截图】</p>
   +     <img src="datadata:image/png;base64,……" alt="前端截图"></img>
   +     <p>图2. 前端</p>
       </div>
   ```

### 转换格式

HTML 转 XeTeX 或 PDF 等不赘述，此处以 HTML 转 DOCX 为例：

1. 打开在线转换网站[HTML转DOC - 在线转换文档文件](https://www.aconvert.com/cn/document/html-to-doc)；
2. 上传 HTML 文件；
3. 选择 DOCX 格式；
4. 点击转换并下载，如果转换成功，请用 DOCX 编辑器（如 Microsoft Word）打开转换后的文件，然后跳到第 6 步；
5. 显示转换失败且重试五次仍然转换失败，直接使用 DOCX 编辑器（如 Microsoft Word）打开 HTML 文件；
6. 打开由上级提供的文档模板，复制转换后的文件的内容部分以“合并格式”或“保留原格式”粘贴到模板中，并另存为 DOCX 文件；
7. 调整文章样式、图片大小位置。

## 结果示例

- [《软件工程实训》课程设计实验报告书](无需智能体阅读的参考/《软件工程实训》课程设计实验报告书.html)
- [双端工程实验报告](无需智能体阅读的参考/双端工程实验报告.html)

## 代码或内容贡献

欢迎每一位对本项目感兴趣的朋友贡献代码和内容。

较为简单的提交贡献方法可查阅[贡献文档](CONTRIBUTING.md)以了解相关信息。

## 许可证

本项目遵循 [CC BY-SA 4.0 International](https://creativecommons.org/licenses/by-sa/4.0/) 许可协议。如果想了解完整许可信息，请查阅 [`LICENSE`](LICENSE) 文件。
